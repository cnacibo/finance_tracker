# Контрольная работа КПО №1. Паттерны проектирования

---

## Содержание

1. [Общая идея решения](#1-общая-идея-решения)
2. [Принципы SOLID и GRASP](#2-принципы-solid-и-grasp)
3. [Паттерны GoF](#3-паттерны-gof)
4. [Инструкция по запуску приложения](#4-инструкция-по-запуску-приложения)

---

## 1. Общая идея решения

**FinanceTrackerApp** — является приложением для учета финансовых операций, включающее управление банковскими счетами, категориями операций и операциями.

- **Управление банковскими счетами**: создание, изменение, удаление счетов, пополнение и снятие средств.
- **Управление категориями**: создание, изменение и удаление категорий для операций.
- **Управление операциями**: создание, изменение и удаление операций, связанных с конкретными счетами и категориями.
- **Аналитика операций**: анализ операций по категориям, расчет разницы между доходами и расходами за определенный период.
- **Импорт и экспорт данных**: возможность импорта и экспорта данных в форматах JSON, CSV и YAML.

---

## 2. Принципы SOLID и GRASP

### Принципы SOLID

1. **Single Responsibility Principle (SRP)**: каждый класс отвечает за одну задачу:
     - `BankAccountFacade` — управление банковскими счетами.
     - `CategoryFacade` — управление категориями.
     - `OperationFacade` — управление операциями.
     - `CsvExportVisitor`, `JsonExportVisitor`, `YamlExportVisitor` — экспорт данных в разные форматы.

2. **Open/Closed Principle (OCP)**: классы открыты для расширения, но закрыты для модификации:
     - `AnalyticsContext` может работать с любыми стратегиями анализа (`IAnalyticsStrategy`), не требуя изменений.
     - Классы экспорта данных реализуют интерфейс `IExportVisitor`, что позволяет добавлять новые форматы экспорта без изменения существующего кода.

3. **Liskov Substitution Principle (LSP)**: наследники могут использоваться вместо базовых классов:
     - `CategoryGroupingStrategy` и `IncomeExpenseDifferenceStrategy` реализуют интерфейс `IAnalyticsStrategy` и могут использоваться в `AnalyticsContext`.

4. **Interface Segregation Principle (ISP)**: интерфейсы разделены на мелкие и узкоспециализированные:
     - `IAnalyticsStrategy` содержит только метод `Analyze`.
     - `IExportVisitor` содержит только метод `Visit`.

5. **Dependency Inversion Principle (DIP)**: зависимости строятся на абстракциях, а не на конкретных реализациях:
     - `BankAccountFacade`, `CategoryFacade`, `OperationFacade` зависят от интерфейса `IFinanceFactory`, а не от конкретной реализации.

---

### Принципы GRASP

1. **High Cohesion**: каждая ответственность четко определена:
     - `BankAccountFacade` отвечает только за управление счетами.
     - `CategoryFacade` отвечает только за управление категориями.

2. **Low Coupling**: классы слабо связаны между собой из-за интерфейсов и фасадов:
     - `OperationFacade` зависит от `BankAccountFacade` и `CategoryFacade` => связь между ними минимальна благодаря использованию интерфейсов.

3. **Creator**: классы создают объекты, которые они используют:
     - `FinanceFactory` создает объекты `BankAccount`, `Category` и `Operation`.

4. **Controller**:
   - `CategoryAnalysisCommand`, `IncomeExpenseAnalysisCommand`, `ExportDataCommand` и другие команды выступают в роли контроллеров управляющих выполнением операций.

---

## 3. Паттерны GoF

### Фасад (Facade) ✅
**Назначение:**
Фасад — это структурный паттерн, который предоставляет упрощенный интерфейс для взаимодействия с группой сложных подсистем.

**Реализация:**
- `CategoryFacade` — фасад для работы с категориями.
- `BankAccountFacade` — фасад для работы с банковскими счетами.
- `OperationFacade` — фасад для операций с деньгами.

**Важность:**
- Упрощает взаимодействие.
- Скрывает сложность и детали реализации.

---

### Команда (Command) и Декоратор (Decorator) ✅
**Назначение:**
- **Команда** инкапсулирует запрос как объект, что позволяет передавать его, ставить в очередь, логировать или отменять.
- **Декоратор** добавляет новое поведение объекту динамически, не изменяя его исходный код.

**Реализация:**
- **Команда**: Классы, наследующие `ICommand` (`CategoryAnalysisCommand`, `ExportDataCommand` и т.д.).
- **Декоратор**: Класс `TimedCommand` добавляет функционал замера времени выполнения команды.

**Важность:**
- Упрощает управление командами.
- Позволяет добавлять новое поведение без изменения существующего кода.

---

### Шаблонный метод (Template Method) ✅
**Назначение:**
Шаблонный метод определяет структуру алгоритма, делегируя выполнение некоторых шагов в подклассы.

**Реализация:**
- Класс `DataImporter` определяет общий алгоритм импорта данных.
- Подклассы `CsvDataImporter`, `JsonDataImporter`, `YamlDataImporter` реализуют конкретные шаги.

**Важность:**
- Упрощает добавление новых форматов импорта.
- Обеспечивает повторное использование кода.

---

### Посетитель (Visitor) ✅
**Назначение:**
Посетитель позволяет добавлять новые операции к объектам, не изменяя их.

**Реализация:**
- Классы `CsvExportVisitor`, `JsonExportVisitor`, `YamlExportVisitor` реализуют интерфейс `IExportVisitor`.

**Важность:**
- Отделяет алгоритмы от объектов.
- Упрощает добавление новых операций.

---

### Фабрика (Factory) ✅
**Назначение:**
Фабрика предоставляет интерфейс для создания объектов.

**Реализация:**
- Класс `FinanceFactory` создает объекты `BankAccount`, `Category` и `Operation`.

**Важность:**
- Инкапсулирует логику создания объектов.
- Упрощает добавление новых типов объектов.

---

### Стратегия (Strategy) ✅
**Назначение:**
Стратегия позволяет динамически изменять алгоритм анализа операций в зависимости от выбранной стратегии.

**Реализация:**
- Классы `CategoryGroupingStrategy` и `IncomeExpenseDifferenceStrategy` реализуют интерфейс `IAnalyticsStrategy`.
- Используется в `AnalyticsContext` для выполнения анализа.

**Важность:**
- Упрощает добавление новых алгоритмов анализа.
- Обеспечивает гибкость.

---

## 4. Инструкция по запуску приложения

### Требования:
- Установленный .NET SDK (версия 6.0 или выше).
- Редактор кода (Visual Studio, Visual Studio Code).

### Запуск приложения:
1. Склонируйте репозиторий с проектом.
2. Откройте проект в редакторе.
3. В терминале выполните команды:
   ```bash
   cd FinanceTrackerApp
   dotnet run
   ```

### Запуск тестирования:
В терминале перейдите в папку `FinanceTrackerApp.Tests` и выполните команду:
   ```bash
   dotnet test
   ```

### Демонстрационные данные:

Приложение создает демонстрационные данные (счета, категории, операции) и выполняет анализ, экспорт и импорт данных.
